sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/m/MessageToast","sap/m/Text","sap/m/VBox","sap/m/MessageBox"],(e,o)=>{"use strict";return e.extend("project.controller.View1",{onInit(){this.oModel=this.getOwnerComponent().getModel();this.getView().setModel(new sap.ui.model.json.JSONModel({results:[]}),"searchModel")},onMenuPress:function(e){if(!this._oMenuSheet){this._oMenuSheet=new sap.m.ActionSheet({buttons:[new sap.m.Button({text:"My Orders",icon:"sap-icon://order-status",press:()=>{const e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("Orders")}}),new sap.m.Button({text:"Account",icon:"sap-icon://account",press:()=>{var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("account")}})],placement:sap.m.PlacementType.Bottom,class:"customActionSheet"});this.getView().addDependent(this._oMenuSheet)}this._oMenuSheet.openBy(e.getSource())},onProfilePress:function(){this.getOwnerComponent().onProfilePress(this.getView())},onLoginPress:function(){var e=this.getView();var o=e.byId("loginRegisterDialog");if(!o){sap.m.MessageBox.error("Dialog not open.");return}var t=e.byId("emailInput").getValue();var n=e.byId("passwordInput").getValue();if(!t||!n){sap.m.MessageBox.warning("Please enter both email and password.");return}console.log(t,n);if(t==="admin@gmail.com"&&n==="admin"){var s=this.getOwnerComponent().getRouter();s.navTo("AdminDahsboard");console.log("routing");return}e.getModel().read("/Customer",{filters:[new sap.ui.model.Filter("email",sap.ui.model.FilterOperator.EQ,t),new sap.ui.model.Filter("password",sap.ui.model.FilterOperator.EQ,n)],success:function(e){if(e.results&&e.results.length>0){var t=e.results[0];var n=new sap.ui.model.json.JSONModel(t);console.log(n);this.getOwnerComponent().setModel(n,"userModel");o.close();this.loadOrdersForUser()}else{sap.m.MessageBox.error("Invalid email or password.")}}.bind(this),error:function(){sap.m.MessageBox.error("Login failed. Please try again.")}})},onRegister:function(){this.getOwnerComponent().onRegister(this.getView())},onToggleForm:function(){this.getOwnerComponent().onToggleForm(this.getView())},onForgotPasswordPress:function(){this.getOwnerComponent().onForgotPasswordPress()},onToggleLoginPasswordVisibility:function(){this.getOwnerComponent().onToggleLoginPasswordVisibility(this.getView())},onToggleRegisterPasswordVisibility:function(){this.getOwnerComponent().onToggleRegisterPasswordVisibility(this.getView())},onCloseLoginDialog:function(){this.getOwnerComponent().onCloseLoginDialog(this.getView())},onSearch:function(e){var o=e.getParameter("query")||e.getParameter("newValue");var t=this.getView().getModel();var n=this.getView().getModel("searchModel");var s=this.byId("productList");var r=this;if(o&&o.trim().length>0){t.read("/Product",{success:function(e){var t=e.results.filter(function(e){return e.name.toLowerCase().includes(o.toLowerCase())});n.setProperty("/results",t);s.setVisible(true)}})}else{n.setProperty("/results",[]);s.setVisible(false)}},onCartPress:function(){this.getOwnerComponent().onCartPress(this.getView())},onCloseCart:function(){this.getOwnerComponent().onCloseCart(this.getView())},updateCartDisplay:function(){this.getOwnerComponent().updateCartDisplay(this.getView())},onAddToCart:function(e){var o=e.getSource().getBindingContext();var t=o.getObject();this.getOwnerComponent().onAddToCart(t)},onPlaceOrder:function(){this.getOwnerComponent().onPlaceOrder(this.getView())},onImagePress1:function(){var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("fruitVegetable")},onImagePress2:function(){var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("attarice")},onImagePress3:function(){var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("sweet")},onImagePress4:function(){var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("dairy")},onImagePress5:function(){var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("packed")},onImagePress6:function(){var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("cooldrinks")},onImagePress7:function(){var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("teacoffe")}})});
//# sourceMappingURL=View1.controller.js.map